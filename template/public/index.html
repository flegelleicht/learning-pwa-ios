<!doctype html>
<html lang="en" manifest="offline.appcache">
<head>
  <!-- Required meta tags-->
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />    
	<meta charset="utf-8">
	<meta name="author" content="Erik Hebisch">
	<meta name="viewport" content="width=device-width, height=device-height, maximum-scale=1, minimum-scale=1, user-scalable=no">
	
  <title>Wiederlist</title>
  <base href="/">

</head>
<body>
	<p>Hello World!</p>
	<script>
		if('serviceWorker' in navigator) {
			navigator.serviceWorker.register('sw.js').then(
				(registration) => {
					console.log(`ServiceWorker registration was successful, has scope: ${registration.scope}`);
				}
			).catch((error) => {
				console.log(`ServiceWorker registration failed because: ${error}`);
			})
		} else if('applicationCache' in window) {
			var iframe = document.createElement('iframe');
			iframe.style.display = 'none';
			iframe.src = 'load-appcache.html';
			document.body.appendChild(iframe);
			
			window.addEventListener('load', () => {
				window.applicationCache.addEventListener('updateready', () => {
					if(window.applicationCache.status === window.applicationCache.UPDATEREADY) {
						window.applicationCache.swapCache();
						window.location.reload(true);
					}
				}, false);
			}, false);
		}
	</script>
</body>
</html>
