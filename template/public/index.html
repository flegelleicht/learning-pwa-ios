<!doctype html>
<html lang="en" manifest="offline.appcache">
<head>
  <meta charset="utf-8">
  <title>Wiederlist</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
	<p>Hello World!</p>
	<script>
		if('serviceWorker' in navigator) {
			navigator.serviceWorker.register('sw.js').then(
				(registration) => {
					console.log(`ServiceWorker registration was successful, has scope: ${registration.scope}`);
				}
			).catch((error) => {
				console.log(`ServiceWorker registration failed because: ${error}`);
			})
		} else if('applicationCache' in window) {
			var iframe = document.createElement('iframe');
			iframe.style.display = 'none';
			iframe.src = 'load-appcache.html';
			document.body.appendChild(iframe);
			
			window.addEventListener('load', () => {
				window.applicationCache.addEventListener('updateready', () => {
					if(window.applicationCache.status === window.applicationCache.UPDATEREADY) {
						window.applicationCache.swapCache();
						window.location.reload(true);
					}
				}, false);
			}, false);
		}
	</script>
</body>
</html>
